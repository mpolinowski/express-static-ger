var express=require("express"),searchRouter=express.Router(),elasticsearch=require("elasticsearch"),connectionString="localhost:9200",_index="wiki2",_type="article",client=new elasticsearch.Client({host:connectionString,log:"trace"});searchRouter.route("/").get(function(e,r){r.render("Search",{title:"INSTAR Wiki Suche",breadcrumbs:'<li class="breadcrumb-item"><a href="/">Home</a></li><li class="breadcrumb-item"><a href="/Search/">Suche</a></li>'})}),searchRouter.route("/Results").get(function(e,r){client.search({index:_index,type:_type,body:{query:{multi_match:{query:e.query.q,fields:["title^100","tags^50","abstract^20","description^10","chapter^5","title2^10","description2^10"],fuzziness:1}}}}).then(function(s){r.render("Search_Results",{title:"INSTAR Wiki Search Results",response:s,query:e.query.q,breadcrumbs:'<li class="breadcrumb-item"><a href="/">Home</a></li><li class="breadcrumb-item"><a href="/Search/">Suche</a></li><li class="breadcrumb-item"><a href="/Search/Results/">Suchergebnisse</a></li>'})},function(e){console.trace(e.message),r.render("Search_Results",{title:"INSTAR Wiki Search Results",response:e.message,breadcrumbs:'<li class="breadcrumb-item"><a href="/">Home</a></li><li class="breadcrumb-item"><a href="/Search/">Suche</a></li><li class="breadcrumb-item"><a href="/Search/Results/">Suchergebnisse</a></li>'})})}),module.exports=searchRouter;